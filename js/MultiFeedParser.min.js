/**
* jQuery.fn.MultiFeedParser v1.1.0 | 2014-10-15
* Control center for all your polling requests. jQuery.ajax() required
* by Helcon Mabesa
* MIT license http://opensource.org/licenses/MIT
**/
var MultiFeedParser=function(a){var b={logName:"[Feed Parser]",jsonpParam:"callback",minRefreshRate:.5},c=function(a){a=a||{};var b=this;b.__vars={};var c=b.__vars;c._config=a,c._fn={},c._data={},c._xhr={},c._callStack={},c._initExe={},c._refreshObj={},b.event=new d(b),c._fn.log=c._config.logging?m:function(){};var g,h="boolean"!=typeof c._config.initOnLoad||c._config.initOnLoad?!0:!1,i=c._config&&c._config.feeds?c._config.feeds:!1;if(h&&i)for(g in i)f(c,g),i[g].refresh&&e(b,g,i[g])},d=function(){var a=function(a){this.__vars={};var b=this.__vars;b.root=a};return a.prototype.reload=function(a){var c,d,g=!1,h=this,i=h.__vars.root,j=i.__vars,k=j._config&&j._config.feeds?j._config.feeds:!1,l=[];if(!k)return!1;var m=function(a){j._refreshObj[a]||e(i,a,k[a])};if("string"==typeof a&&(a=p(a).replace(/\s+/g," "),l=a.split(" ")),l.length>0)for(d=0;d<l.length;d++)k[l[d]]&&(j._fn.log(b.logName+" Reloading {type}: '"+l[d]+"'"),f(j,l[d]),m(l[d]),g=!0);else{j._fn.log(b.logName+" Reloading all feed {type}");for(c in k)f(j,c),m(c);g=!0}},a.prototype.addFeed=function(){var a=this,c=a.__vars.root,d=c.__vars,g=d._config&&d._config.feeds?d._config.feeds:{},h=arguments,i={type:!1,url:!1};if("string"==typeof h[0]&&"string"==typeof h[1]?(i.type=h[0],i.url=h[1]):"object"==typeof h[0]&&h[0].type&&h[0].url&&(i=h[0]),!i.type||!i.url)return d._fn.log(b.logName+" Cannot fire event.addFeed(). Missing config {type} or {url}."),!1;if(g[i.type])return d._fn.log(b.logName+" Cannot fire event.addFeed() for {type}: '"+i.type+"'. This type already exists."),!1;var j,k={};for(j in i)"type"!==j&&(k[j]=i[j]);c.__vars._config.feeds||(c.__vars._config.feeds={}),c.__vars._config.feeds[i.type]=k,f(d,i.type),i.refresh&&e(c,i.type,k)},a.prototype.removeFeed=function(a){var c=this,d=c.__vars.root,e=d.__vars,f=d.__vars._config&&d.__vars._config.feeds?!0:!1;if(!f||"string"!=typeof a)return!1;var g=function(a){if(!d.__vars._config.feeds[a])return!1;d.__vars._config.feeds[a]=null,d.__vars._initExe[a]=null,d.__vars._callStack[a]=null,d.__vars._refreshObj[a]=null;try{delete d.__vars._config.feeds[a],delete d.__vars._initExe[a],delete d.__vars._callStack[a],delete d.__vars._refreshObj[a]}catch(c){}e._fn.log(b.logName+" Notice: Feed removed for {type}: '"+a+"'")};a=p(a).replace(/\s+/g," ");for(var h=a.split(" "),i=0;i<h.length;i++)g(h[i])},a.prototype.onLoad=function(){var a=this,b=a.__vars.root,c=b.__vars,d=c._config&&c._config.feeds?c._config.feeds:{},e=h(arguments);if(!e.type||!e.callback||!d[e.type])return!1;var f=e.type,g=e.callback;c._callStack[f]||(c._callStack[f]=[]),c._callStack[f].push(g),c._initExe[f]&&g(c._data[f])},a.prototype.getData=function(){var a=this,b=a.__vars.root,c=b.__vars,d=(c._config&&c._config.feeds?c._config.feeds:{},h(arguments));if(!d.type||!d.callback)return!1;var e,f=d.type,g=d.callback,i=0,j=120,k=function(){"undefined"!=typeof c._data[f]?g(c._data[f]):j>=i&&(clearTimeout(e),e=setTimeout(function(){k()},250),i++)};k()},a}(),e=function(a,c,d){var e=!isNaN(d.refresh)&&parseFloat(d.refresh)>=b.minRefreshRate?d.refresh.toFixed(2):!1;return e?(e=6e4*e,clearInterval(a.__vars._refreshObj[c]),void(a.__vars._refreshObj[c]=setInterval(function(){a.event&&"function"==typeof a.event.reload?a.event.reload(c):m(b.logName+" Warning: Cannot find event.reload(). Reload for {type}: '"+c+"' not fired.")},e))):(m(b.logName+" Warning: Cannot set refresh for {type}: '"+c+"' refresh rate less than minimum rate allowed."),!1)},f=function(c,d){function e(a){var b=i(h.normalize,f),e=b?b(a):a;c._data[d]=e,c._initExe[d]||(c._initExe[d]=!0),g(c._callStack[d],c._data[d])}var f=c._config.feeds,h=f[d]||!1;if(!h)return!1;var o=function(){var a=!1;return"string"==typeof h?a=h:h.url&&(a=h.url),a}();if(!o)return m(b.logName+" URL not defined for feed {type}: '"+d+"'"),!1;var p=function(){var a="json",b=l(o);return"string"==typeof h.jsonpCallback||b?a="jsonp":h.type&&k(h.type)&&(a=h.type),a=a.toLowerCase()}(),q={};switch(p){case"json":q={dataType:"json",cache:!0,async:!0,success:function(a){e(a)}};break;case"jsonp":var r=l(o),s=j(d,"string"==typeof h.jsonpCallback?h.jsonpCallback:!1,r);window[s.name]=function(a){e(a)},q={dataType:"script",async:!0,cache:!0},r||(q.data={},q.data[s.param]=s.name);break;case"xml":q={dataType:"xml",cache:!0,async:!0,success:function(a){e(a)}}}if(q.url=o,function(){var a=c._config.cacheTime&&!isNaN(c._config.cacheTime)?parseFloat(c._config.cacheTime):!1;a&&(q.data||(q.data={}),q.data.cb=n(a))}(),"jsonp"!==p&&c._xhr[d])try{"function"==typeof c._xhr[d].abort&&c._xhr[d].abort()}catch(t){}c._xhr[d]=a(q)},g=function(a,b){if(!o(a))return!1;for(var c=0;c<a.length;c++)"function"==typeof a[c]&&a[c](b)},h=function(a){var b=!1,c=!1;"string"==typeof a[0]?b=a[0]:"object"!=typeof a[0]||o(a[0])||(b=a[0].type?a[0].type:!1),"function"==typeof a[1]&&(c=a[1]);var d={type:b,callback:c};return d},i=function(a,b){var c,d=!1;if("function"==typeof a)d=a;else if("string"==typeof a)for(c in b)if(a===c&&"function"==typeof b[c].normalize){d=b[c].normalize;break}return d},j=function(a,b,c){var d={param:"callback"};if(b&&2===b.split("=").length){var e=b.split("=");d.param=e[0],d.name=e[1]}else d.name=b?b:c?c:"jsonp"+a;return d},k=function(a){var b,c=!1,d=["jsonp","json","xml","html","text","script"];for(b=0;b<d.length;b++)if(d[b]===a.toLowerCase()){c=!0;break}},l=function(a){var c,d=!1,e=a.split("?"),f=e[1];if(f){var g=f.toLowerCase().indexOf(b.jsonpParam+"=")>-1?f.split("&"):[];for(c=0;c<g.length;c++){var h=g[c].split("=");if(h[0].toLowerCase()===b.jsonpParam){d=decodeURI(h[1]);break}}}return d},m=function(){var a=!0;if(a&&window.console)try{return console.log.apply(console,arguments)}catch(b){console.log(arguments)}},n=function(a){a=a||!1;var b=new Date,c=b.getFullYear().toString()+(b.getMonth()+1).toString()+b.getDate().toString(),d=b.getHours()+1,e=b.getMinutes();return c+=d.toString()+(a&&!isNaN(a)?Math.floor(e/parseFloat(a)).toString():"")},o=function(a){return a=a||!1,"[object Array]"===Object.prototype.toString.call(a)},p=function(a){return a=(a||"").replace(/^\s+|\s+$/g,"")};return c}(function(a){return a.ajax}(jQuery));